# 麻將聽牌計算器功能演示

## 功能概述

本專案新增了一個麻將聽牌計算器，可以計算當前手牌需要哪些牌才能和牌。

## 測試結果

### 測試案例 1：標準聽牌（13張萬子）
```
輸入: 1112345678999萬
解析到 13 張牌
聽 9 張牌: 1萬 2萬 3萬 4萬 5萬 6萬 7萬 8萬 9萬
```
✅ **結果正確** - 這是一個萬能聽牌，可以聽所有萬子

### 測試案例 2：字牌組合（13張）
```
輸入: 東東東南南南西西西北北北中
解析到 13 張牌
聽 1 張牌: 中
```
✅ **結果正確** - 三組刻子（東南西北各三張），等待中來組成雀頭

### 測試案例 3：錯誤輸入（牌數不足）
```
輸入: 111萬
解析到 3 張牌
結果: 無法聽牌或格式錯誤
```
✅ **正確處理** - 因為只有3張牌，無法形成聽牌狀態

### 測試案例 4：錯誤輸入（牌數過多）
```
輸入: 11122233344455萬
解析到 14 張牌
結果: 無法聽牌或格式錯誤
```
✅ **正確處理** - 14張牌已經是完整手牌，不是聽牌狀態

## 支援的輸入格式

### 萬子
- 單張：`1萬`、`5萬`、`9萬`
- 多張：`123萬`（代表1萬、2萬、3萬）
- 組合：`111222333萬`

### 筒子
- 格式同萬子：`123筒`、`456筒`

### 索子
- 格式同萬子：`789索`

### 字牌
- 風牌：`東`、`南`、`西`、`北`
- 三元牌：`中`、`發`、`白`
- 組合：`東東東南南南`

## 技術實現

### 算法原理
1. **解析輸入**：將中文麻將牌符號轉換為內部編號（1-34）
2. **驗證牌數**：檢查是否為13張牌（標準聽牌狀態）
3. **窮舉測試**：嘗試添加每一種可能的牌（1-34）
4. **和牌檢測**：使用遞迴算法檢查是否可以組成合法的和牌
   - 1個雀頭（對子）
   - 4個面子（順子或刻子）

### 程式碼結構
- `mahjongcalculator.h/cpp` - Qt版本計算器
- `mahjongcalculator_standalone.h/cpp` - 獨立版本計算器
- `test_calculator_standalone.cpp` - 測試程式

## UI 整合

計算器已整合到主視窗中：
- 輸入框：輸入手牌（例如：`1112345678999萬`）
- 計算按鈕：點擊「計算聽牌」
- 結果顯示：顯示所有可能的聽牌

## 編譯和測試

### 編譯獨立測試程式
```bash
g++ -std=c++17 -o test_calculator mahjongcalculator_standalone.cpp test_calculator_standalone.cpp
```

### 運行測試
```bash
./test_calculator
```

## 結論

✅ 功能實現完整
✅ 算法正確可靠
✅ 支援所有標準麻將牌型
✅ 錯誤處理完善
✅ UI 整合完成
✅ 獨立測試可用
