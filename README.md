# 麻將配對遊戲 (Mahjong Matching Game)

這是一個使用 Qt C++ 開發的麻將遊戲應用程式，包含配對遊戲和聽牌計算器兩大功能。

## 功能特色

### 1. 麻將配對遊戲

傳統的麻將配對遊戲，配對所有相同的牌即可獲勝。

#### 遊戲目標
配對所有相同的麻將牌，直到遊戲板清空為止。

#### 遊戲規則
1. 遊戲板上有 32 張牌（16 對）
2. 點擊兩張相同的牌進行配對
3. 配對成功的牌會變成綠色並被移除
4. 配對失敗時，牌會恢復原狀，需要重新選擇
5. 完成所有配對即可獲勝

### 2. 麻將聽牌計算器

全新的聽牌（聽張）計算功能，可以計算出當前手牌需要哪些牌才能和牌。

#### 使用方法
1. 在「麻將聽牌計算器」區域的輸入框中輸入您的手牌
2. 點擊「計算聽牌」按鈕
3. 系統會顯示所有可能的聽牌結果

#### 輸入格式
- **萬子**: 使用數字加「萬」，例如：`1萬`、`123萬`（代表1萬、2萬、3萬）
- **筒子**: 使用數字加「筒」，例如：`1筒`、`456筒`
- **索子**: 使用數字加「索」，例如：`1索`、`789索`
- **字牌**: 直接輸入字牌，例如：`東`、`南`、`西`、`北`、`中`、`發`、`白`

#### 輸入範例
- `1112345678999萬` - 13張萬子（一般聽牌狀態）
- `11123456789萬東` - 11張萬子加1張東風
- `東東東南南南西西西北北北中` - 13張字牌

#### 重要說明
- 標準麻將需要 **13 張牌** 才能形成聽牌狀態（等待第14張牌和牌）
- 如果輸入的牌數不是13張，系統會顯示「無法聽牌」
- 計算器會列出所有可能的聽牌（等待的牌）

#### 技術原理
聽牌計算器使用標準麻將規則：
- 和牌需要：1個雀頭（對子）+ 4個面子（順子或刻子）
- 順子：三張連續的同類型數牌（例如：123萬）
- 刻子：三張相同的牌（例如：東東東）
- 雀頭：兩張相同的牌（例如：11萬）

## 麻將牌類型

### 數牌（34種基本牌型）
- **萬子**: 1萬 到 9萬
- **筒子**: 1筒 到 9筒  
- **索子**: 1索 到 9索

### 字牌
- **風牌**: 東、南、西、北
- **三元牌**: 中、發、白

### 操作說明

#### 配對遊戲
- **點擊牌**: 選擇要配對的牌
- **重新開始**: 點擊「重新開始」按鈕開始新遊戲

#### 聽牌計算器
- **輸入手牌**: 在輸入框中輸入您的13張手牌
- **計算聽牌**: 點擊「計算聽牌」按鈕查看結果
- **查看結果**: 計算結果會顯示所有可能的聽牌

## 編譯和運行

### 需求
- Qt 6.x 或更高版本
- C++17 編譯器

### 使用 Qt 編譯主程式
```bash
qmake last-report.pro
make
```

### 運行主程式
```bash
./last-report
```

### 編譯獨立測試程式（不需要Qt）
如果您只想測試聽牌計算器功能，可以編譯獨立版本：
```bash
g++ -std=c++17 -o test_calculator mahjongcalculator_standalone.cpp test_calculator_standalone.cpp
./test_calculator
```

## 專案結構

```
last-report/
├── main.cpp                          # Qt 應用程式入口
├── widget.h / widget.cpp             # 主視窗和遊戲邏輯
├── widget.ui                         # Qt UI 設計檔案
├── mahjongcalculator.h / .cpp        # 聽牌計算器（Qt版本）
├── mahjongcalculator_standalone.h / .cpp  # 聽牌計算器（獨立版本）
├── test_calculator_standalone.cpp    # 測試程式
├── last-report.pro                   # Qt 專案檔
└── README.md                         # 本文件
```

## 遊戲特色
- 簡單直觀的遊戲界面
- 傳統麻將牌設計
- 即時配對反饋
- 分數追蹤系統
- **全新！** 聽牌計算器功能
- 支援所有標準麻將牌型（萬、筒、索、字牌）
- 準確的麻將規則實現

## 測試範例

### 聽牌計算器測試範例

使用獨立測試程式可以快速驗證計算器功能：

```bash
$ ./test_calculator
=== 麻將聽牌計算器測試 ===

輸入: 1112345678999萬
說明: 13張萬子（缺一張成和）
解析到 13 張牌
聽 9 張牌: 1萬 2萬 3萬 4萬 5萬 6萬 7萬 8萬 9萬
```

這個測試展示了一個包含13張牌的手牌，系統計算出可以聽所有萬子（1-9萬）。

### 為什麼需要13張牌？

在標準麻將遊戲中：
- 和牌需要 **14張牌**：1個雀頭（對子）+ 4個面子（順子或刻子）
- 聽牌狀態是 **13張牌**：等待第14張牌來完成和牌
- 例如 `1112345678999萬`（13張）可以聽任何一張萬子來組成和牌

祝您遊戲愉快！🀄